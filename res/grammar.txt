script
	: statement*
	;
statement
	: '{' statement* '}'
	| var '=' expr
	| 'give' '(' NAME ')'
	| 'take' '(' NAME ')'
	| 'text' '(' STRING ')'
	| 'warp' '(' NAME ')'
	| if_stmt
	;
var
	: NAME
	| NAME '.' NAME '.' 'visible'
	| NAME '.' (NAME '.')? 'state'
	;
if_stmt
	: 'if' '(' expr ')' statement ('else' statement)?
	;
expr
	: INT
	| var
	| ('-' | '~') expr
	| '(' expr ')'
	| expr BIN_OP expr
	| ('has' | 'take') '(' NAME ')'
	;